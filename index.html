<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Opening in It’s a Wrap…</title>
  <!-- Social preview for messengers -->
  <meta property="og:title" content="It’s a Wrap" />
  <meta property="og:description" content="Discover movies and tv shows" />
  <meta property="og:image" content="https://media.themoviedb.org/t/p/w533_and_h300_bestv2/8ZTVqvKDQ8emSGUEMjsS4yHAwrp.jpg" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <script>
    (function () {
      const params = new URLSearchParams(location.search);
      const id = params.get('id'); // /l/8564855 => "8564855"
      const name = params.get('name') || 'List';

      if (!id) {
        let message = document.getElementById('message')
        if (message) {
          message.innerText("Incorrect or missing id. You can close this page.")
        }
        return;
      }

      const deep = `itsawrap://lists/${encodeURIComponent(id)}?name=${encodeURIComponent(name)}`;

      // const iosStore = 'https://apps.apple.com/app/idYOUR_APP_ID';
      // const androidStore = 'https://play.google.com/store/apps/details?id=com.company.itsawrap';
      // const fallback = /Android/i.test(navigator.userAgent) ? androidStore : iosStore;

      const fallback = "https://themoviedb.org"

      const start = Date.now();
      window.location = deep;

      setTimeout(() => {
        if (Date.now() - start < 1200) location.href = fallback;
      }, 900);
    })();
  </script>
</head>
<body>
  <p id="message">Opening list in the app…</p>
</body>
</html>
